#!/usr/bin/env python
# -*- coding: utf-8 -*-

import rospy, sys
import moveit_commander
from control_msgs.msg import GripperCommand
import moveit_commander
from moveit_commander import MoveGroupCommander, PlanningSceneInterface
from moveit_msgs.msg import  PlanningScene, ObjectColor
from geometry_msgs.msg import PoseStamped, Pose


class MoveItFkDemo:
    def __init__(self):
        # 初始化move_group的API
        moveit_commander.roscpp_initialize(sys.argv)

        # 初始化ROS节点
        rospy.init_node('moveit_fk_demo', anonymous=True)
 
        # 初始化需要使用move group控制的机械臂中的arm group
        arm = moveit_commander.MoveGroupCommander('arm')

        
        # 设置机械臂和夹爪的允许误差值
        arm.set_goal_joint_tolerance(0.001)
        # arm.set_planner_id("RRTConnectkConfigDefault")
        arm.set_planner_id("RRTstar")

        reference_frame = 'base_link'






        # 设置机械臂的目标位置，使用六轴的位置数据进行描述（单位：弧度）
        
        joint_positions = [
                            # #init结果 0, size:7, values: 
                            # [0.0456364, -0.400563, -0.0414954, 0.879, 0.0210558, 0.379061, -0.0304794],
                            # #init结果 1, size:7, values: 
                            # [0.0456364, -0.400563, -0.0414954, 0.879, 0.0210558, 0.379061, -0.0304794],
                            # #init结果 2, size:7, values: 
                            # [-0.536215, -0.495004, 0.387819, 1.28618, -0.015143, 0.0240445, 0.219869],
                            # #init结果 3, size:7, values: 
                            # [-1.15285, -0.706411, 0.785157, 1.45372, 0.14487, -0.148767, 0.405327],
                            # #init结果 4, size:7, values: 
                            # [-1.5592, -1.05688, 0.913052, 1.4191, 0.422224, -0.087392, 0.528779],
                            # #init结果 5, size:7, values: 
                            # [-1.90212, -1.43253, 0.692497, 1.16929, 0.675089, 0.25632, 0.743476],
                            # #init结果 6, size:7, values: 
                            # [-2.19897, -1.50664, 0.305404, 0.564858, 0.692813, 0.783777, 1.15551],
                            # #init结果 7, size:7, values: 
                            # [-1.94495, -1.61288, 0.785062, 1.43535, 0.961897, 0.0289539, 0.609252],
                            # #init结果 8, size:7, values: 
                            # [-1.68399, -0.875753, 1.47565, 1.90867, 0.574179, -0.957613, 0.343225],
                            # #init结果 9, size:7, values: 
                            # [-1.87369, -0.578597, 1.41798, 2.16007, 0.107018, -1.38165, 0.704756],
                            # #init结果 10, size:7, values: 
                            # [-2.6959, -0.501381, 1.88715, 1.90868, -0.171857, -1.57163, 1.01829],
                            # #init结果 11, size:7, values: 
                            # [-3.29856, -0.739486, 2.13514, 1.43535, -0.173942, -1.60916, 1.42163],
                            # #init结果 12, size:7, values: 
                            # [-3.80753, -1.08805, 2.30099, 0.564844, -0.094258, -1.34746, 1.72368],
                            # #init结果 13, size:7, values: 
                            # [-3.80753, -1.08805, 2.30099, 0.564844, -0.094258, -1.34746, 1.72368],
                            # #init结果 14, size:7, values: 
                            # [-3.51037, -0.706205, 2.12403, 1.15464, -0.254472, -1.4854, 1.68053],
                            # #init结果 15, size:7, values: 
                            # [-3.13985, -0.346943, 1.89855, 1.39904, -0.521287, -1.36049, 1.59034],
                            # #init结果 16, size:7, values: 
                            # [-3.54505, 0.142717, 2.74902, 1.43414, -0.92129, -0.886122, 1.40049],
                            # #init结果 17, size:7, values: 
                            # [-3.46322, 0.358652, 2.89367, 1.27288, -1.34315, -0.514562, 1.69857],
                            # #init结果 18, size:7, values: 
                            # [-3.72906, 0.389597, 3.09616, 0.879004, -2.0424, -0.541005, 2.54568]

# 用moveit反算的结果
                            # #gpmp规划结果 0, size:7, values: 
                            # [0.705926746417, 0.700768242259, -2.74450388094, 1.19237160501, 0.490477651619, -0.583457133696, 1.70802742161],
                            # #gpmp规划结果 1, size:7, values: 
                            # [0.697952756623, 0.77969946257, -2.75181360954, 1.24129003607, 0.529348748964, -0.556809917975, 1.69047266599],
                            # #gpmp规划结果 2, size:7, values: 
                            # [0.66627838445, 0.970974624834, -2.77762093395, 1.36442051447, 0.63828492665, -0.514652018608, 1.64484685779],
                            # #gpmp规划结果 3, size:7, values: 
                            # [0.612583530561, 1.20765023745, -2.82144341846, 1.51907758895, 0.816546716849, -0.518823839812, 1.59539959777],
                            # #gpmp规划结果 4, size:7, values: 
                            # [0.585760724551, 1.45054046387, -2.84511851745, 1.63724837934, 1.08603321526, -0.633133452313, 1.61166602278],
                            # #gpmp规划结果 5, size:7, values: 
                            # [0.690349583699, 1.69593786772, -2.74532177166, 1.64512763486, 1.46698380412, -0.885024282452, 1.8120493564],
                            # #gpmp规划结果 6, size:7, values: 
                            # [0.86380995901, 1.88649624084, -2.54141485091, 1.62837253578, 1.85238212323, -1.26787745364, 2.12643553997],
                            # #gpmp规划结果 7, size:7, values: 
                            # [0.722669605552, 1.85699530912, -2.53812816428, 1.8386319485, 1.98013344344, -1.77940510991, 2.1521557762],
                            # #gpmp规划结果 8, size:7, values: 
                            # [0.678028207056, 1.77784648011, -2.33621566918, 1.84924364925, 1.94177262024, -2.06356305299, 2.32723863184],
                            # #gpmp规划结果 9, size:7, values: 
                            # [0.708064809033, 1.71928489618, -1.9620408561, 1.73460132688, 1.82109237918, -2.10608597488, 2.58750301099],
                            # #gpmp规划结果 10, size:7, values: 
                            # [0.440314749114, 1.6165602625, -1.81852405384, 1.975350668, 1.64952442349, -2.17146056826, 2.43741903796],
                            # #gpmp规划结果 11, size:7, values: 
                            # [0.382861988031, 1.52423827476, -1.64381264386, 2.0984098834, 1.43372684691, -2.18033213087, 2.3810239321],
                            # #gpmp规划结果 12, size:7, values: 
                            # [0.542508842089, 1.43546413344, -1.48704742065, 2.00896294875, 1.19047753617, -2.03784187978, 2.43051371625],
                            # #gpmp规划结果 13, size:7, values: 
                            # [0.408413607695, 1.27230950499, -1.71415263189, 2.05575723045, 0.982097043899, -1.70335388005, 2.070664384],
                            # #gpmp规划结果 14, size:7, values: 
                            # [0.36256097401, 1.11593096175, -2.01011531657, 1.97921102184, 0.863043862739, -1.35901496687, 1.72081906009],
                            # #gpmp规划结果 15, size:7, values: 
                            # [0.48282836583, 0.982353022218, -2.25279769779, 1.74870082669, 0.80031226869, -1.07008652879, 1.52070143702],
                            # #gpmp规划结果 16, size:7, values: 
                            # [0.654358444649, 0.851808022843, -2.45111145745, 1.48305521019, 0.746645513955, -0.835334375945, 1.40842653903],
                            # #gpmp规划结果 17, size:7, values: 
                            # [0.797134513232, 0.738430647669, -2.59584866688, 1.27320222002, 0.696072692409, -0.670830819796, 1.34750840565],
                            # #gpmp规划结果 18, size:7, values: 
                            # [0.856483405255, 0.687743461545, -2.65414276777, 1.1883086208, 0.672278011286, -0.608388299074, 1.32814015516]
# version3初值，pose_sigma=0.01
                            # #gpmp规划结果 0, size:7, values: 
                            # [-0.288225861908, -0.744534516379, -0.0193871360938, 1.73375804664, 0.755708379063, -0.980745350463, -0.525937906466],
                            # #gpmp规划结果 1, size:7, values: 
                            # [-0.459903610262, -0.734044995108, 0.126312076122, 1.78591885005, 0.717162879453, -1.04638731377, -0.420523133936],
                            # #gpmp规划结果 2, size:7, values: 
                            # [-0.929063312412, -0.77105066988, 0.439555279354, 1.86325114533, 0.658671753069, -1.20773328788, -0.0454628037894],
                            # #gpmp规划结果 3, size:7, values: 
                            # [-1.4794720154, -1.06750549214, 0.689222327298, 1.87600024627, 0.646968098736, -1.20751282987, 0.544172380587],
                            # #gpmp规划结果 4, size:7, values: 
                            # [-1.90113414344, -1.55409997002, 0.613194891492, 1.78762634623, 0.67889950502, -0.945792807528, 1.19490773828],
                            # #gpmp规划结果 5, size:7, values: 
                            # [-2.16945752298, -1.94124633825, 0.267540693969, 1.76321285015, 0.636406651977, -0.524539865285, 1.67386096233],
                            # #gpmp规划结果 6, size:7, values: 
                            # [-2.3975172386, -2.12992687388, -0.0338987649623, 1.84937010217, 0.510455484732, -0.220924635249, 1.86696184468],
                            # #gpmp规划结果 7, size:7, values: 
                            # [-2.40088973795, -2.25141821723, 0.198612191386, 1.74433548609, 0.65792797006, -0.388014181827, 2.06182418413],
                            # #gpmp规划结果 8, size:7, values: 
                            # [-2.36106731541, -2.18323343977, 0.834668514151, 1.79596729124, 0.85547514916, -1.15412260121, 1.99959144087],
                            # #gpmp规划结果 9, size:7, values: 
                            # [-2.55278739049, -1.68102783964, 1.44092226743, 1.93177751955, 1.06529191377, -1.83203221454, 1.70340830724],
                            # #gpmp规划结果 10, size:7, values: 
                            # [-2.80991189664, -1.24679176, 1.8085180303, 1.72043251538, 1.11042141887, -2.14906146298, 1.24256668575],
                            # #gpmp规划结果 11, size:7, values: 
                            # [-3.12117044292, -1.0645973688, 2.11911932049, 1.54383739172, 0.958616943882, -1.89027928892, 0.934512028443],
                            # #gpmp规划结果 12, size:7, values: 
                            # [-3.35810039366, -1.00443886023, 2.35708413372, 1.37612175578, 0.711470944453, -1.64759604766, 0.691477242869],
                            # #gpmp规划结果 13, size:7, values: 
                            # [-3.4105700965, -0.929585789969, 2.62174662236, 1.32127253688, 0.472053223734, -1.56583018275, 0.634469275521],
                            # #gpmp规划结果 14, size:7, values: 
                            # [-3.48507213544, -0.607031836156, 2.82724566268, 1.45017944895, 0.287839580004, -1.4581677767, 0.576918295908],
                            # #gpmp规划结果 15, size:7, values: 
                            # [-3.63500438482, -0.239514491204, 3.03369268584, 1.61944970214, 0.249055835016, -1.33143335197, 0.415456398226],
                            # #gpmp规划结果 16, size:7, values: 
                            # [-3.95989383209, 0.114949950358, 3.26831137633, 1.68657915347, 0.440576855091, -1.09777767788, 0.20050358419],
                            # #gpmp规划结果 17, size:7, values: 
                            # [-4.36222277335, 0.548728464173, 3.39616492932, 1.58694311484, 0.65468726057, -0.626473984041, 0.207000342191],
                            # #gpmp规划结果 18, size:7, values: 
                            # [-4.74654254025, 0.725317850631, 3.18009057505, 1.73368883083, 0.789193898378, 0.0193959782482, 0.495710078876]
# version3初值，pose_sigma=0.05， ori_sigma=0.01，
                            # #gpmp规划结果 0, size:7, values: 
                            # [-0.0883236732083, -0.747837564299, -0.0152103628032, 1.73384515385, 0.336573545709, -0.982770363334, -0.268718420946],
                            # #gpmp规划结果 1, size:7, values: 
                            # [-0.249673158256, -0.76690239298, 0.129669989778, 1.78250129293, 0.274652575248, -1.0107875572, -0.14596405323],
                            # #gpmp规划结果 2, size:7, values: 
                            # [-0.718985628212, -0.908983150444, 0.28406829763, 1.89998745051, 0.188152918696, -1.08203156169, 0.376063995306],
                            # #gpmp规划结果 3, size:7, values: 
                            # [-1.28938751263, -1.23963925002, 0.446159174753, 2.04890368339, 0.103059711899, -1.16350795647, 1.14431595963],
                            # #gpmp规划结果 4, size:7, values: 
                            # [-1.81764911539, -1.73690903489, 0.608722425848, 2.23082610923, 0.0291654779623, -1.21489454209, 1.92420861401],
                            # #gpmp规划结果 5, size:7, values: 
                            # [-2.15972990312, -2.31521665221, 0.789880666411, 2.45901584693, -0.0694302636006, -1.20930230378, 2.45304697423],
                            # #gpmp规划结果 6, size:7, values: 
                            # [-1.90060078424, -2.40688891337, 0.858313997118, 2.42545702569, 0.405078206602, -1.17235986303, 3.16211451595],
                            # #gpmp规划结果 7, size:7, values: 
                            # [-2.44376319721, -2.60719620272, 0.34314452855, 2.06991218885, 0.111684611412, -0.62163755569, 2.89238523584],
                            # #gpmp规划结果 8, size:7, values: 
                            # [-2.56339980802, -2.12987751949, 0.0339679611378, 1.83300538022, -0.124662065736, -0.840603394441, 3.07504292667],
                            # #gpmp规划结果 9, size:7, values: 
                            # [-1.8179157407, -1.51311900093, 0.644517650878, 1.29331356883, -0.0322844315381, -1.11130162695, 3.71157975489],
                            # #gpmp规划结果 10, size:7, values: 
                            # [-2.39854932006, -1.6333974124, 0.00154808962226, 0.757946511339, 1.03622949366, -1.39338151749, 2.93609470723],
                            # #gpmp规划结果 11, size:7, values: 
                            # [-2.83478363054, -1.89590128331, 0.0586122352084, 0.660670285752, 2.05605028176, -1.6067122987, 2.75241728457],
                            # #gpmp规划结果 12, size:7, values: 
                            # [-2.88633849334, -1.85409538551, 0.903491457084, 0.590536241784, 2.00127178318, -1.92981092102, 2.62461347491],
                            # #gpmp规划结果 13, size:7, values: 
                            # [-3.72843334689, -1.20372496202, 1.57335367534, 0.93843622836, 1.33277553977, -1.66094057535, 1.32808672462],
                            # #gpmp规划结果 14, size:7, values: 
                            # [-3.72312364268, -0.861028154484, 2.55361220286, 1.11468084182, 0.576333914571, -1.46978521875, 0.923197575036],
                            # #gpmp规划结果 15, size:7, values: 
                            # [-3.77177128257, -0.31067161346, 3.07242447318, 1.23138832549, 0.254550572384, -1.09029104264, 0.66097292119],
                            # #gpmp规划结果 16, size:7, values: 
                            # [-3.8373850597, 0.291034033459, 3.35869188549, 1.35293861366, 0.115846552926, -0.646430580862, 0.542110974907],
                            # #gpmp规划结果 17, size:7, values: 
                            # [-3.91473647166, 0.752188798227, 3.41931187274, 1.44866897258, 0.0126983687754, -0.214594499114, 0.5783860949],
                            # #gpmp规划结果 18, size:7, values: 
                            # [-4.10845546571, 0.73643085193, 3.17490714489, 1.7337675181, 0.00540544742539, 0.28291115579, 0.756696908461]
# version3初值，pose_sigma=0.05， ori_sigma=0.0001，
                            # #gpmp规划结果 0, size:7, values: 
                            # [-2.21978957427, -0.0307951220708, 0.251331411485, 0.0570644225758, 0.146423087897, -0.0263076684575, 1.82207409708],
                            # #gpmp规划结果 1, size:7, values: 
                            # [-2.25247564873, -0.113485088336, 0.191619818076, 0.148278021207, 0.249863811395, -0.0468031996478, 1.81199124616],
                            # #gpmp规划结果 2, size:7, values: 
                            # [-2.33735119253, -0.394162094722, 0.100839060883, 0.37876884255, 0.471000797734, -0.00628991723745, 1.77068010794],
                            # #gpmp规划结果 3, size:7, values: 
                            # [-2.45028371519, -0.815514305325, 0.0202700242848, 0.673986185632, 0.734346320417, 0.122451188454, 1.69330582236],
                            # #gpmp规划结果 4, size:7, values: 
                            # [-2.56945038251, -1.26532357256, -0.090467538973, 0.977050320652, 1.00619160804, 0.284038281495, 1.5836063551],
                            # #gpmp规划结果 5, size:7, values: 
                            # [-2.68749699807, -1.65004678503, -0.236145050132, 1.250192634, 1.2509957197, 0.407655299569, 1.44355707345],
                            # #gpmp规划结果 6, size:7, values: 
                            # [-2.78717677385, -1.92297161276, -0.326072356314, 1.45858548383, 1.45962746197, 0.433739496865, 1.30502704538],
                            # #gpmp规划结果 7, size:7, values: 
                            # [-2.85006291209, -2.07583357805, -0.225801941775, 1.56629283817, 1.6511556823, 0.342483277857, 1.22522300867],
                            # #gpmp规划结果 8, size:7, values: 
                            # [-2.892841273, -2.11194523338, 0.0436948445777, 1.55844413331, 1.81388790055, 0.122408748337, 1.20931945527],
                            # #gpmp规划结果 9, size:7, values: 
                            # [-2.94894358804, -2.03282309105, 0.363399488422, 1.4464402873, 1.92310717797, -0.230642838793, 1.21796585351],
                            # #gpmp规划结果 10, size:7, values: 
                            # [-3.04535218905, -1.8690634372, 0.694869363809, 1.2425721624, 1.93798119305, -0.645107468852, 1.21883315026],
                            # #gpmp规划结果 11, size:7, values: 
                            # [-3.18521014055, -1.67105287617, 1.03738853105, 0.985110237546, 1.81951726682, -1.02494907312, 1.1894739151],
                            # #gpmp规划结果 12, size:7, values: 
                            # [-3.34882703673, -1.47041641485, 1.39413493789, 0.735411601156, 1.56391917778, -1.28250388536, 1.11702101397],
                            # #gpmp规划结果 13, size:7, values: 
                            # [-3.50397528843, -1.26021942697, 1.76437186555, 0.53638728045, 1.20629663238, -1.35625862727, 1.01157377413],
                            # #gpmp规划结果 14, size:7, values: 
                            # [-3.63301250495, -1.00603705053, 2.14380569921, 0.388147142798, 0.81284291496, -1.22789607159, 0.908917176758],
                            # #gpmp规划结果 15, size:7, values: 
                            # [-3.7354194864, -0.70282132898, 2.51828321333, 0.272532989053, 0.45539002669, -0.932778402859, 0.837670524566],
                            # #gpmp规划结果 16, size:7, values: 
                            # [-3.81727235662, -0.381304093255, 2.84652701462, 0.174916502253, 0.18128818141, -0.55072218536, 0.803086174735],
                            # #gpmp规划结果 17, size:7, values: 
                            # [-3.8823263208, -0.105630854601, 3.06997175896, 0.0919236604912, 0.0213068350583, -0.196329383968, 0.792061426927],
                            # #gpmp规划结果 18, size:7, values: 
                            # [-3.92845531874, 0.0228344603503, 3.14783527366, 0.0509459615388, 0.00305837413865, -0.0277410817012, 0.777602520931]

# （2）version3初值，pose_sigma=0.05， ori_sigma=0.0001，
                            #  #gpmp规划结果 0, size:7, values: 
                            # [-2.10651526174, -0.0291380937174, 0.206043545543, 0.0556931500992, -0.0713624021945, -0.0355760413466, 1.97225161707],
                            # #gpmp规划结果 1, size:7, values: 
                            # [-2.14597133112, -0.130490225761, 0.148427233522, 0.125754650705, 0.0344908170932, -0.010996163897, 1.9650359408],
                            # #gpmp规划结果 2, size:7, values: 
                            # [-2.24961451691, -0.419611848799, 0.0714831211349, 0.362809031172, 0.257633785241, 0.0542178829048, 1.93094753565],
                            # #gpmp规划结果 3, size:7, values: 
                            # [-2.38502010322, -0.82663860574, -0.0197325166816, 0.695552875575, 0.54017631419, 0.151816956141, 1.86661710142],
                            # #gpmp规划结果 4, size:7, values: 
                            # [-2.53859266492, -1.25484091748, -0.137358318414, 1.0393821395, 0.825789085658, 0.259709854071, 1.75469776513],
                            # #gpmp规划结果 5, size:7, values: 
                            # [-2.68228729006, -1.62350106966, -0.257218534074, 1.33340607407, 1.07992291169, 0.341591748329, 1.60188702577],
                            # #gpmp规划结果 6, size:7, values: 
                            # [-2.7164075812, -1.89060661573, -0.314136710545, 1.54642072587, 1.36397732444, 0.365383848264, 1.51283371127],
                            # #gpmp规划结果 7, size:7, values: 
                            # [-2.82553971306, -2.0535580751, -0.169387102433, 1.64259864224, 1.52274896503, 0.292909512146, 1.36280142292],
                            # #gpmp规划结果 8, size:7, values: 
                            # [-2.87376193424, -2.06974222091, 0.108559916182, 1.6166405051, 1.70832854182, 0.0821783778982, 1.32067140785],
                            # #gpmp规划结果 9, size:7, values: 
                            # [-2.88743155664, -1.98783978791, 0.420019300435, 1.47924612334, 1.88433206071, -0.275956323431, 1.35498440687],
                            # #gpmp规划结果 10, size:7, values: 
                            # [-3.04221128158, -1.8554456608, 0.761235033416, 1.30890806374, 1.86953048904, -0.677808359149, 1.28461129301],
                            # #gpmp规划结果 11, size:7, values: 
                            # [-3.18898567868, -1.64485117413, 1.10943039569, 1.02294684737, 1.74489413798, -1.06114259214, 1.24364361667],
                            # #gpmp规划结果 12, size:7, values: 
                            # [-3.30760679364, -1.44355754811, 1.4715205879, 0.703198014326, 1.49519555725, -1.3100441891, 1.21219203132],
                            # #gpmp规划结果 13, size:7, values: 
                            # [-3.51958116386, -1.24531258525, 1.80792078207, 0.544975405434, 1.16008333088, -1.36571201743, 1.03164940344],
                            # #gpmp规划结果 14, size:7, values: 
                            # [-3.63935649043, -0.997840570749, 2.17647043815, 0.397806427261, 0.778576321974, -1.23519008879, 0.91853117245],
                            # #gpmp规划结果 15, size:7, values: 
                            # [-3.73640380436, -0.698771017691, 2.53958308409, 0.279093476265, 0.433770752116, -0.937216292621, 0.838866030734],
                            # #gpmp规划结果 16, size:7, values: 
                            # [-3.81485568587, -0.379352082781, 2.85783360401, 0.178566728579, 0.170628195064, -0.55281784404, 0.799783495413],
                            # #gpmp规划结果 17, size:7, values: 
                            # [-3.87827230958, -0.104861950079, 3.07374706327, 0.0929792849374, 0.0184811966642, -0.19675437689, 0.787016212261],
                            # #gpmp规划结果 18, size:7, values: 
                            # [-3.92401596745, 0.0228587179012, 3.14832587809, 0.0510136503965, 0.00353738228118, -0.0278330230119, 0.772190188838]
# （2）version3初值，pose_sigma=0.5， ori_sigma=0.0001，
                             #gpmp规划结果 0, size:7, values: 
                            # [-0.156816104328, -0.168085220976, -0.0245528025049, 0.477844402729, 0.444741903417, -0.304572072054, -0.29337166982],
                            #  #gpmp规划结果 1, size:7, values: 
                            # [-0.267690416461, -0.237866122809, 0.0337375978993, 0.336449440425, 0.512619301263, -0.0915415018322, -0.302946878621],
                            #  #gpmp规划结果 2, size:7, values: 
                            # [-0.542499691922, -0.355068719591, 0.21349844514, -0.037073275445, 0.688460181141, 0.373246554246, -0.422221112169],
                            #  #gpmp规划结果 3, size:7, values: 
                            # [-0.998778362576, -0.374288070293, 0.262638347799, -0.494418828154, 1.00703187028, 0.887589677655, -0.527673286673],
                            #  #gpmp规划结果 4, size:7, values: 
                            # [-1.67532347202, -0.185562933801, -0.0626209767833, -0.916700284865, 1.36375396432, 1.20021873585, -0.600760075602],
                            #  #gpmp规划结果 5, size:7, values: 
                            # [-2.48380386875, 0.400649243259, -0.752271992947, -1.22342524021, 1.8989869174, 1.16560862411, -0.391020192399],
                            #  #gpmp规划结果 6, size:7, values: 
                            # [-3.34718876624, 0.505356588294, -0.69360222763, -1.06255347844, 1.45314079571, 1.08224628428, -0.72375730551],
                            #  #gpmp规划结果 7, size:7, values: 
                            # [-2.44899648484, 0.705955648954, 0.161433428432, -0.477020869097, 1.0037714807, -0.0656487370931, -0.312496862216],
                            #  #gpmp规划结果 8, size:7, values: 
                            # [-2.04607901364, 0.300670309275, 1.42280985485, 0.21066478947, 0.299973592412, -0.683207002457, -0.673373274152],
                            #  #gpmp规划结果 9, size:7, values: 
                            # [-3.24151313161, 0.333536745497, 1.80245067865, 1.47029092009, -0.0498865224796, -1.20306829338, -1.53503237821],
                            #  #gpmp规划结果 10, size:7, values: 
                            # [-3.25105641206, 1.2444472096, 3.27495421267, 2.29737322144, -0.82671041623, -1.85146209618, -0.563763732266],
                            #  #gpmp规划结果 11, size:7, values: 
                            # [-3.64681523238, 1.69873557595, 3.76568425706, 2.80891273657, -1.74845284661, -1.81140263786, 0.0322755175301],
                            #  #gpmp规划结果 12, size:7, values: 
                            # [-4.29626812362, 1.35681307596, 3.29745190415, 2.89298756837, -1.91824261999, -1.32866018933, 0.252902232006],
                            #  #gpmp规划结果 13, size:7, values: 
                            # [-3.6735899671, 0.631406856391, 3.46031004198, 1.99393045768, -1.00662519264, -1.44813910788, 1.40042972189],
                            #  #gpmp规划结果 14, size:7, values: 
                            # [-3.93539041862, 0.314070192048, 2.81366814648, 1.27314408507, -0.493088675211, -1.23425427645, 1.36633235055],
                            #  #gpmp规划结果 15, size:7, values: 
                            # [-4.0307136235, 0.199004385505, 2.74426447534, 0.832377249103, -0.31745869733, -0.997025282704, 1.47470063424],
                            #  #gpmp规划结果 16, size:7, values: 
                            # [-4.07347353787, 0.168476126662, 3.01019690054, 0.588052239097, -0.43919003274, -0.688749951696, 1.67109662657],
                            #  #gpmp规划结果 17, size:7, values: 
                            # [-4.15000458825, 0.230387509008, 3.25396905574, 0.411544557765, -0.720726972962, -0.412731050836, 1.77683037894],
                            #  #gpmp规划结果 18, size:7, values: 
                            # [-4.28947440026, 0.171005827265, 3.1948285731, 0.47781956286, -0.816796191577, -0.0800753571784, 1.91044664228]
# version3初值，ori_sigma=0.0001，
                             #gpmp规划结果 0, size:7, values: 
                            [-1.07459578801, -0.0453976898303, 1.12742921517, 1.26714427825, 1.39142357078, -1.5723652448, -0.94549914802],
                            #gpmp规划结果 1, size:7, values: 
                            [-1.07312953289, -0.0996964018872, 1.19909506587, 1.26074410011, 1.36193965109, -1.57069147249, -0.945622069627],
                            #gpmp规划结果 2, size:7, values: 
                            [-1.06845894527, -0.240599521062, 1.38377509277, 1.2412004436, 1.29254505522, -1.57999244259, -0.935684203994],
                            #gpmp规划结果 3, size:7, values: 
                            [-1.06851982062, -0.412436460641, 1.61696694076, 1.21670901775, 1.21155544908, -1.62482901102, -0.903870619129],
                            #gpmp规划结果 4, size:7, values: 
                            [-1.11255086707, -0.555185148122, 1.82962817636, 1.2125074018, 1.11122997779, -1.71744848925, -0.869512618671],
                            #gpmp规划结果 5, size:7, values: 
                            [-1.27811352602, -0.635300535348, 1.97639023715, 1.26153795749, 0.932169371276, -1.84661415935, -0.885705263487],
                            #gpmp规划结果 6, size:7, values: 
                            [-1.50878155714, -0.659314986614, 2.08701722878, 1.29655354105, 0.706760093087, -1.99803202252, -0.863341770923],
                            #gpmp规划结果 7, size:7, values: 
                            [-1.53938790535, -0.635641546898, 2.25557987498, 1.15207997274, 0.651667761619, -2.18298474466, -0.521382836774],
                            #gpmp规划结果 8, size:7, values: 
                            [-1.76649899353, -0.545633015616, 2.44527324307, 1.16286811514, 0.524992408946, -2.38045630024, -0.292473538532],
                            #gpmp规划结果 9, size:7, values: 
                            [-2.19962582766, -0.423920936687, 2.67201010105, 1.31251113237, 0.260038428619, -2.53055599034, -0.230365336812],
                            #gpmp规划结果 10, size:7, values: 
                            [-2.44719325205, -0.356214686245, 2.96043092605, 1.23637619327, -0.00268232763887, -2.57224343237, 0.0178441151447],
                            #gpmp规划结果 11, size:7, values: 
                            [-2.79944906839, -0.308904621511, 3.17713054144, 1.24804788908, -0.284965473211, -2.54785530949, 0.120077173742],
                            #gpmp规划结果 12, size:7, values: 
                            [-3.24815621222, -0.242390283113, 3.32878914444, 1.38164121839, -0.54360691277, -2.48473612045, 0.0734155551401],
                            #gpmp规划结果 13, size:7, values: 
                            [-3.42459327869, -0.203995100677, 3.5880836872, 1.31656325263, -0.691101073227, -2.32669612124, 0.265059891061],
                            #gpmp规划结果 14, size:7, values: 
                            [-3.58788825647, -0.1348573581, 3.78859325659, 1.26385022809, -0.765222268128, -2.07936195687, 0.429484278317],
                            #gpmp规划结果 15, size:7, values: 
                            [-3.79167678712, -0.0130556500061, 3.89570776972, 1.27632011386, -0.784777907204, -1.79800387228, 0.492516099073],
                            #gpmp规划结果 16, size:7, values: 
                            [-3.96585229932, 0.13172881728, 3.95658245689, 1.3109226702, -0.762755913523, -1.54002965588, 0.513878991138],
                            #gpmp规划结果 17, size:7, values: 
                            [-4.07509975413, 0.252032733898, 3.99303040244, 1.34088672985, -0.727712062002, -1.35566322826, 0.525322254779],
                            #gpmp规划结果 18, size:7, values: 
                            [-4.11181665163, 0.301120394555, 4.00566093667, 1.35221288275, -0.710812344477, -1.28733830942, 0.529976252693]

                        ]
        # 将joint_positions中的每个元素发布出去
        for i in range(len(joint_positions)):
            arm.set_joint_value_target(joint_positions[i])
            arm.go()
            rospy.loginfo("%d success",i)
        


        # 关闭并退出moveit
        moveit_commander.roscpp_shutdown()
        moveit_commander.os._exit(0)



    # 设置场景物体的颜色
    def setColor(self, name, r, g, b, a = 0.9):
        # 初始化moveit颜色对象
        color = ObjectColor()
        
        # 设置颜色值
        color.id = name
        color.color.r = r
        color.color.g = g
        color.color.b = b
        color.color.a = a
        
        # 更新颜色字典
        self.colors[name] = color

    # 将颜色设置发送并应用到moveit场景当中
    def sendColors(self):
        # 初始化规划场景对象
        p = PlanningScene()

        # 需要设置规划场景是否有差异     
        p.is_diff = True
        
        # 从颜色字典中取出颜色设置
        for color in self.colors.values():
            p.object_colors.append(color)
        
        # 发布场景物体颜色设置
        self.scene_pub.publish(p)

if __name__ == "__main__":
    try:
        MoveItFkDemo()
    except rospy.ROSInterruptException:
        pass
